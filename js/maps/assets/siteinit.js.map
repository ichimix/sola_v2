{"version":3,"sources":["assets/siteinit.js"],"names":["SiteInit","_this","this","option","arguments","length","undefined","_classCallCheck","defaultClass","menuBtn","menu","menuBtnSwitch","menuSwitch","anchorIgnore","easing","t","b","c","d","Math","cos","PI","className","anchorSpeed","anchorCallback","flags","scrollElm","document","scrollingElement","userAgent","indexOf","body","documentElement","getElementById","smoothScrollElm","querySelectorAll","i","elm","addEventListener","e","preventDefault","getAttribute","_loop","defaultAnchorSpeed","_createClass","key","value","href","cb","startTime","scrollFrom","duration","_this2","targetElm","_typeof","querySelector","Date","now","scrollTop","loop","targetPos","getBoundingClientRect","top","currentTime","scrollTo","window","requestAnimationFrame","classList","menuClose","menuOpen","menuToggle","add","remove","name","val"],"mappings":"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","file":"../../assets/siteinit.js","sourcesContent":["export const SiteInit = class {\n\tconstructor(option = {}) {\n\t\tconst defaultClass = {\n\t\t\tmenuBtn: 'menuBtn',\n\t\t\tmenu: 'menu',\n\t\t\tmenuBtnSwitch: 'on',\n\t\t\tmenuSwitch: 'show',\n\t\t\tanchorIgnore: '.noscroll',\n\t\t};\n\t\tconst defaultAnchorSpeed = 300;\n\t\tthis.easing = function (t, b, c, d) { return c * (0.5 - Math.cos(t / d * Math.PI) / 2) + b; }; //jswing\n\n\t\tthis.className = defaultClass;\n\t\tthis.className.menuBtn = !('menuBtn' in option) ? defaultClass.menuBtn : option.menuBtn;\n\t\tthis.className.menu = !('menu' in option) ? defaultClass.menu : option.menu;\n\t\tthis.className.menuBtnSwitch = !('menuBtnSwitch' in option) ? defaultClass.menuBtnSwitch : option.menuBtnSwitch;\n\t\tthis.className.menuSwitch = !('menuSwitch' in option) ? defaultClass.menuSwitch : option.menuSwitch;\n\t\tthis.className.anchorIgnore = !('anchorIgnore' in option) ? defaultClass.anchorIgnore : option.anchorIgnore;\n\t\tthis.anchorSpeed = !('anchorSpeed' in option) ? defaultAnchorSpeed : option.anchorSpeed;\n\t\tthis.anchorCallback = !('anchorCallback' in option) ? null : option.anchorCallback;\n\t\tthis.flags = !('flags' in option) ? null : option.flags;\n\n\t\tthis.scrollElm = (function () {\n\t\t\tif ('scrollingElement' in document) { return document.scrollingElement; }\n\t\t\tif (navigator.userAgent.indexOf('WebKit') != -1) { return document.body; }\n\t\t\treturn document.documentElement;\n\t\t})();\n\n\t\tthis.menuBtn = document.getElementById(this.className.menuBtn);\n\t\tthis.menu = document.getElementById(this.className.menu);\n\n\t\tconst smoothScrollElm = document.querySelectorAll('a[href^=\"#\"]:not(' + this.anchorIgnore + ')');\n\n\t\tif (smoothScrollElm.length > 0) {\n\t\t\tfor (let i = 0; i < smoothScrollElm.length; i++) {\n\t\t\t\tlet elm = smoothScrollElm[i];\n\t\t\t\telm.addEventListener('click', (e) => {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tthis.anchorScroll(elm.getAttribute('href'), this.anchorCallback);\n\t\t\t\t}, false);\n\t\t\t}\n\t\t}\n\t\tif (this.menuBtn) {\n\t\t\tthis.menuBtn.addEventListener('click', (e) => { this.menuToggle(e); }, false);\n\t\t}\n\t}\n\tanchorScroll(href, cb) {\n\t\tlet targetElm;\n\t\tif(typeof href === 'object') {\n\t\t\ttargetElm = href;\n\t\t} else {\n\t\t\ttargetElm = (href === '#') ? document.querySelector('html') : document.querySelector(href);\n\t\t}\n\t\tif (!targetElm) return;\n\t\tconst startTime = Date.now();\n\t\tconst scrollFrom = this.scrollElm.scrollTop;\n\t\tconst duration = this.anchorSpeed;\n\t\tconst loop = () => {\n\t\t\tconst targetPos = targetElm.getBoundingClientRect().top + this.scrollElm.scrollTop - scrollFrom;\n\t\t\tconst currentTime = Date.now() - startTime;\n\t\t\tif (currentTime < duration) {\n\t\t\t\tscrollTo(0, this.easing(currentTime, scrollFrom, targetPos, duration));\n\t\t\t\twindow.requestAnimationFrame(loop);\n\t\t\t} else {\n\t\t\t\tscrollTo(0, targetPos + scrollFrom);\n\t\t\t}\n\t\t};\n\t\tloop();\n\t\tif(typeof cb === 'function') {\n\t\t\tcb();\n\t\t}\n\t}\n\tmenuToggle() {\n\t\tif (this.menu.classList.contains(this.className.menuSwitch)) {\n\t\t\tthis.menuClose();\n\t\t} else {\n\t\t\tthis.menuOpen()\n\t\t}\n\t}\n\tmenuOpen() {\n\t\tthis.menu.classList.add(this.className.menuSwitch);\n\t\tthis.menuBtn.classList.add(this.className.menuBtnSwitch);\n\t}\n\tmenuClose() {\n\t\tthis.menu.classList.remove(this.className.menuSwitch);\n\t\tthis.menuBtn.classList.remove(this.className.menuBtnSwitch);\n\t}\n\tsetFlag(name, val) {\n\t\tthis.flags[name] = val;\n\t}\n\tgetFlag(name) {\n\t\treturn this.flags[name];\n\t}\n}\n"]}