{"version":3,"sources":["common.js"],"names":["SiteInit","_this","this","option","arguments","length","undefined","_classCallCheck","defaultSelectors","menuBtn","menu","anchorIgnore","sa","defaultsaMargin","window","innerHeight","easing","t","b","c","d","Math","cos","PI","selectors","anchorSpeed","saMargin","flags","scrollElm","document","scrollingElement","navigator","body","documentElement","querySelector","smoothScrollElm","i","elm","addEventListener","e","preventDefault","getAttribute","_loop","menuToggle","saInit","_createClass","key","value","startTime","duration","targetElm","href","Date","now","scrollTop","loop","getBoundingClientRect","top","_this2","scrollFrom","currentTime","scrollTo","anchorScroll","targetPos","requestAnimationFrame","classList","contains","menuClose","menuOpen","add","remove","name","val","saElms","querySelectorAll","showItem","status","delay","trigger","trigElm","_this3","setTimeout","saListener","siteInit"],"mappings":"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","file":"../common.js","sourcesContent":["const SiteInit = class {\n\tconstructor(option = {}) {\n\t\tconst defaultSelectors = {\n\t\t\tmenuBtn: '#menuBtn',\n\t\t\tmenu: '#menu',\n\t\t\tanchorIgnore: '.noscroll',\n\t\t\tsa: '.anm'\n\t\t}\n\t\tconst defaultAnchorSpeed = 300,\n\t\t\tdefaultsaMargin = window.innerHeight * 0.2;\n\t\tthis.easing = function (t, b, c, d) { return c * (0.5 - Math.cos(t / d * Math.PI) / 2) + b; }; //jswing\n\n\t\tthis.selectors = defaultSelectors;\n\t\tthis.selectors.menuBtn = !('menuBtn' in option) ? defaultSelectors.menuBtn : option.menuBtn;\n\t\tthis.selectors.menu = !('menu' in option) ? defaultSelectors.menu : option.menu;\n\t\tthis.selectors.anchorIgnore = !('anchorIgnore' in option) ? defaultSelectors.anchorIgnore : option.anchorIgnore;\n\t\tthis.selectors.sa = !('sa' in option) ? defaultSelectors.sa : option.sa;\n\t\tthis.anchorSpeed = !('anchorSpeed' in option) ? defaultAnchorSpeed : option.anchorSpeed;\n\t\tthis.saMargin = !('saMargin' in option) ? defaultsaMargin : option.saMargin;\n\t\tthis.flags = !('flags' in option) ? null : option.flags;\n\n\t\tthis.scrollElm = (function () {\n\t\t\tif ('scrollingElement' in document) { return document.scrollingElement; }\n\t\t\tif (navigator.userAgent.indexOf('WebKit') != -1) { return document.body; }\n\t\t\treturn document.documentElement;\n\t\t})();\n\n\t\tthis.menuBtn = document.querySelector(this.selectors.menuBtn);\n\t\tthis.menu = document.querySelector(this.selectors.menu);\n\n\t\tconst smoothScrollElm = document.querySelectorAll('a[href^=\"#\"]:not(' + this.anchorIgnore + ')');\n\n\t\tif (smoothScrollElm.length > 0) {\n\t\t\tfor (let i = 0; i < smoothScrollElm.length; i++) {\n\t\t\t\tlet elm = smoothScrollElm[i];\n\t\t\t\telm.addEventListener('click', (e) => {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tthis.anchorScroll(elm.getAttribute('href'));\n\t\t\t\t\tif (this.menuBtn) {\n\t\t\t\t\t\tthis.menuClose();\n\t\t\t\t\t}\n\t\t\t\t}, false);\n\t\t\t}\n\t\t}\n\t\tif (this.menuBtn) {\n\t\t\tthis.menuBtn.addEventListener('click', (e) => { this.menuToggle(e); }, false);\n\t\t}\n\n\t\tthis.saInit();\n\n\t}\n\tanchorScroll(href) {\n\t\tconst targetElm = (href === '#') ? document.querySelector('html') : document.querySelector(href);\n\t\tif (!targetElm) return;\n\t\tconst startTime = Date.now();\n\t\tconst scrollFrom = this.scrollElm.scrollTop;\n\t\tconst duration = this.anchorSpeed;\n\t\tconst loop = () => {\n\t\t\tconst targetPos = targetElm.getBoundingClientRect().top + this.scrollElm.scrollTop - scrollFrom;\n\t\t\tconst currentTime = Date.now() - startTime;\n\t\t\tif (currentTime < duration) {\n\t\t\t\tscrollTo(0, this.easing(currentTime, scrollFrom, targetPos, duration));\n\t\t\t\twindow.requestAnimationFrame(loop);\n\t\t\t} else {\n\t\t\t\tscrollTo(0, targetPos + scrollFrom);\n\t\t\t}\n\t\t};\n\t\tloop();\n\t}\n\tmenuToggle() {\n\t\tif (this.menu.classList.contains('show')) {\n\t\t\tthis.menuClose();\n\t\t} else {\n\t\t\tthis.menuOpen()\n\t\t}\n\t}\n\tmenuOpen() {\n\t\tthis.menu.classList.add('show');\n\t\tthis.menuBtn.classList.add('on');\n\t}\n\tmenuClose() {\n\t\tthis.menu.classList.remove('show');\n\t\tthis.menuBtn.classList.remove('on');\n\t}\n\tsetFlag(name, val) {\n\t\tthis.flags[name] = val;\n\t}\n\tgetFlag(name) {\n\t\treturn this.flags[name];\n\t}\n\tsaInit() {\n\t\tconst saElms = document.querySelectorAll(this.selectors.sa);\n\t\tif (saElms.length === 0) {\n\t\t\treturn false;\n\t\t}\n\t\tconst saFunc = (elm) => {\n\t\t\tlet status = true;\n\t\t\tlet pos = elm.getBoundingClientRect().top;\n\t\t\tconst delay = elm.getAttribute('data-delay');\n\t\t\tconst trigger = elm.getAttribute('data-trigger');\n\t\t\tconst trigElm = (trigger) ? document.querySelector(trigger) : elm;\n\t\t\tconst showItem = function () {\n\t\t\t\telm.classList.add('show');\n\t\t\t\tstatus = false;\n\t\t\t};\n\t\t\treturn () => {\n\t\t\t\tif (!status) return;\n\t\t\t\tpos = trigElm.getBoundingClientRect().top;\n\t\t\t\tif (pos < window.innerHeight - this.saMargin || elm.classList.contains('animation_afterLoad')) {\n\t\t\t\t\tif (delay) {\n\t\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\t\tshowItem();\n\t\t\t\t\t\t}, delay);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tshowItem();\n\t\t\t\t}\n\t\t\t};\n\t\t};\n\t\tconst sa = [];\n\t\tfor (let i = 0; saElms.length > i; i++) {\n\t\t\tsa[i] = saFunc(saElms[i]);\n\t\t}\n\t\tconst saListener = (e) => {\n\t\t\tfor (var i = 0; sa.length > i; i++) {\n\t\t\t\tsa[i]();\n\t\t\t}\n\t\t};\n\t\twindow.addEventListener('load', saListener);\n\t\twindow.addEventListener('scroll', saListener);\n\t}\n}\n\n/*\noption default\n{\n\tmenuBtn: '#menuBtn', //メニューボタンのセレクタ\n\tmenu: '#menu', //メニューのセレクタ\n\tanchorIgnore: '.noscroll', //スムーススクロールを適用しない要素のセレクタ\n\tanchorSpeed: 300, //スムーススクロールのスピード\n\tsa: '.anm', //スクロールアニメーションのセレクタ\n\tsaMargin: window.innerHeight * 0.2 //スクロールアニメーションを適用する要素を表示させる位置（デフォルトは画面の一番下から20%の位置）\n}\n*/\nconst siteInit = new SiteInit();\n"]}